# sudo apt-get install build-essential libatomic1 python gfortran perl wget m4 cmake pkg-config curl

OTHER=qblk:~/other

.PHONY: clone all

clone: 
	mkdir -p raw
	(cd raw || exit; \
		[ -e julia ] || git clone -b release-1.6 --depth 1 $(OTHER)/jl/julia || exit; \
	)

all: clone
	rm -rf out
	(cd raw/julia || exit; \
		git pull; \
		make O=../../out/julia configure; \
	)
	(cd out/julia || exit; \
		cp ../../Make.jl.user Make.user; \
		make -j $(nproc); \
		make install prefix=/usr/local; \
	)
